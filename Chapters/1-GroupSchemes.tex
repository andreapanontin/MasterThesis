\documentclass[../Main]{subfiles}
\begin{document}
\chapter{Preliminaries}
\section{Affine group schemes}
In the following we will use these notations for important categories:
$\mathsf{Sch}_{S}$ for the category of schemes over $S$,
$\mathsf{Gp}$ for that of groups,
$\mathsf{Ab}$ for that of abelian groups
and $\mathsf{Sets}$ for that of sets.
Moreover, by {\em ring} or {\em algebra}, we will mean one which is commutative and with unity.
Finally we will often denote an object $X \in \mathrm{Ob} \left(\mathsf{C}\right)$ 
of a category $\mathsf{C}$ simply by $X \in \mathsf{C}$.
\begin{defn}[$S$-Group scheme]
	Let $F\colon \mathsf{Sch}_S^{op} \to \mathsf{Gp}$ be a functor.
	Assume that $F$ is representable by $G \in \mathsf{Sch}_{ S }$, i.e. such that, 
	functorially in $T \in \mathsf{Sch}_{ S }$,
	\begin{equation}
		\iota F(T) \simeq \mathrm{Hom}_{\mathsf{Sch}_S} \left( T, G \right)
	,\end{equation} 
	for $\iota\colon \mathsf{Gp} \to \mathsf{Sets}$ the forgetful functor.
	Then we call $G$ a {\em group scheme} over $S$
	or $S$-group scheme.
\end{defn}


\begin{rem}[$T$-points of an $S$-scheme]
	Let's recall the standard notation: let $T \in \mathsf{Sch}_{ S }$, one defines
	the $T$-points of $G \in \mathsf{Sch}_{ S }$ as
	\begin{equation}
		G(T) \coloneqq \mathrm{Hom}_{\mathsf{Sch}_{ S }} \left( T, G \right)
	.\end{equation} 
	If, in particular, $G$ is a {\em group scheme} then, by definition,
	$G(T)$ is endowed with group structure for every $T \in \mathsf{Sch}_{ S }$.
\end{rem}


\begin{rem}[]
	By definition, a group is a set $G \in \mathsf{Sets}$, endowed with an operation,
	an inverse map, and an identity element satisfying the usual properties.
	These can be rewritten in terms of commutative diagrams.
	At first one writes the above three (respectively) as the following maps:
	\begin{equation}
			\begin{tikzcd}[row sep = 0ex
         ,/tikz/column 1/.append style={anchor=base east}
         ,/tikz/column 2/.append style={anchor=base west}
         ,/tikz/column 3/.append style={anchor=base east}]
			m\colon G \cross G \arrow[r, "", rightarrow] &
			G & \text{(multiplication)} \\
			\mathrm{inv}\colon G \arrow[r, "", rightarrow] &
			G & \text{(inverse)} \\
			\varepsilon \colon S \arrow[r, "", rightarrow] &
			G & \text{(unit)} 
		\end{tikzcd}
	\end{equation} 
	for $\left\{ e \right\}$ the terminal object in $\mathsf{Gp}$.
	Let's write $\pi\colon G \to \left\{ e \right\}$
	as the unique arrow in the terminal object
	and $\Delta\colon G \to G \cross G$ the diagonal morphism.
	Then, associativity of product, inverse element and
	identity are characterized by: 
	\begin{align}\label{eq:GroupAxioms}
		m \circ (id_G \cross m) &= m \circ (m \cross id_G),\\
		m \circ (id_G \cross \mathrm{inv}) \circ \Delta &=
		m \circ (\mathrm{inv} \cross id_G) \circ \Delta = \varepsilon \circ \pi,\\
		m \circ (\varepsilon \cross id_G) &=
		m \circ (id_G \cross \varepsilon) = id_G
	.\end{align} 
\end{rem}


\begin{rem}[]\label{rem:StructuralMorphisms}
	Given a group scheme $G \in \mathsf{Sch}_{ S }$, Yoneda's lemma allows to translate
	the group structure of $G(T)$, for $T \in \mathsf{Sch}_{ S }$, into a group structure on $G$.
	In fact, since the universal property of
	fiber product gives $\left( G \cross_{ S } G \right)(T) = G(T) \cross G(T)$,
	one obtains that there exist unique maps
	\begin{equation}
			\begin{tikzcd}[row sep = 0ex
         ,/tikz/column 1/.append style={anchor=base east}
         ,/tikz/column 2/.append style={anchor=base west}
         ,/tikz/column 3/.append style={anchor=base east}]
			m\colon G \cross_{ S } G \arrow[r, "", rightarrow] &
			G & \text{(multiplication)} \\
			\mathrm{inv}\colon G \arrow[r, "", rightarrow] &
			G & \text{(inverse)} \\
			\varepsilon \colon S \arrow[r, "", rightarrow] &
			G & \text{(unit)} 
		\end{tikzcd}
	\end{equation} 
	inducing the group structure on $G(T)$ via Yoneda embedding.
	Then, again by Yoneda's lemma, also the above maps have to
	satisfy the properties written in 
	\cref{eq:GroupAxioms}.
	More explicitly:
	\begin{enumerate}
		\item Associativity of the product
			\begin{equation}
			\begin{tikzcd}[column sep=4.5em]
				G \cross_{ S } G \cross_{ S } G 
				\arrow[r, "id_G \cross_S m", rightarrow] 
				\arrow[d, "m \cross_S id_G"', rightarrow] &
				G \cross_{ S } G \arrow[d, "m", rightarrow] \\
				G \cross_{ S } G \arrow[r, "m"', rightarrow] &
				G.
			\end{tikzcd}
			\end{equation} 
		\item Inverse morphism 
			\begin{equation*}
			\begin{tikzcd}[column sep=2.7em]
				G \cross_{ S } G \arrow[rr, "id_G \cross_S \mathrm{inv}", rightarrow] & &
				G \cross_{ S } G \arrow[d, "m", rightarrow] \\
				G \arrow[u, "\Delta", rightarrow] 
				\arrow[r, "\pi", rightarrow] &
				S \arrow[r, "\varepsilon", rightarrow] & 
				G
			\end{tikzcd}
			\qquad
			\begin{tikzcd}[column sep=2.7em]
				G \cross_{ S } G \arrow[rr, "\mathrm{inv} \cross_S id_G", rightarrow] & &
				G \cross_{ S } G \arrow[d, "m", rightarrow] \\
				G \arrow[u, "\Delta", rightarrow] 
				\arrow[r, "\pi", rightarrow] &
				S \arrow[r, "\varepsilon", rightarrow] & 
				G
			\end{tikzcd}
			\end{equation*} 
		\item Identity element 
			\begin{equation}
			\begin{tikzcd}
				G \cross_{ S } G \arrow[r, "m", rightarrow] &
				G \\
				S \cross_{ S } G \arrow[r, "id_G", rightarrow] 
				\arrow[u, "\varepsilon \cross_S id_G", rightarrow] &
				G \arrow[u, "id_G"', rightarrow] 
			\end{tikzcd}
			\qquad
			\begin{tikzcd}
				G \cross_{ S } G \arrow[r, "m", rightarrow] &
				G \\
				G \cross_{ S } S \arrow[r, "id_G", rightarrow] 
				\arrow[u, "id_G \cross_S \varepsilon", rightarrow] &
				G. \arrow[u, "id_G"', rightarrow] 
			\end{tikzcd}
			\end{equation} 
	\end{enumerate}
\end{rem}


\begin{defn}[Commutative $S$-group scheme]
	We say that a group scheme $G \in \mathsf{Sch}_{ S }$ is {\em commutative}
	iff $G(T)$ is an abelian group for all $T \in \mathsf{Sch}_{ S }$.
	As before, this is equivalent to asking that the following diagram commutes
	\begin{equation}
	\begin{tikzcd}
		G \cross_S G \arrow[rr, "{ \left(\mathrm{pr}_2, \mathrm{pr}_1\right)}", rightarrow] 
		\arrow[rd, "m"', rightarrow] & &
		G \cross_{ S } G
		\arrow[ld, "m", rightarrow] \\
					     &
		G
	.\end{tikzcd}
	\end{equation}
\end{defn}


\begin{rem}[]
	One can generalize the definition of group object, from the category
	of $S$-schemes, to any category $\mathsf{C}$ admitting finite products
	(hence with fianl object given by the empty product) in the same manner as above.
	In fact, being $S$ the final object in $\mathsf{Sch}_{ S }$, one sees
	that fiber products over $S$ (seen in the category of schemes)
	are just products in $\mathsf{Sch}_{ S }$.
\end{rem}


\begin{defn}[Morphism of group schemes]
	Let $G, G'$ be group schemes, a {\em homomorphism of group schemes}
	\begin{equation}
		\begin{tikzcd}
			\alpha\colon G \arrow[r, "", rightarrow] &
			G'
		\end{tikzcd}
	\end{equation} 
	is a morphism $G \to G'$ in $\mathsf{Sch}_{ S }$ s.t., for all
	$T \in \mathsf{Sch}_{ S }$, the corresponding morphism at the level of $T$-points
	is a group homomorphism
	\begin{equation}
	\begin{tikzcd}[row sep = 0ex
		,/tikz/column 1/.append style={anchor=base east}
		,/tikz/column 2/.append style={anchor=base west}]
		\alpha(T)\colon G(T) \arrow[r, "", rightarrow] &
		G'(T) \\
		g \arrow[r, "", mapsto] & \alpha \circ g.
	\end{tikzcd}
	\end{equation} 
	Notice that the identity of a group scheme is clearly a homomorphism of group
	schemes and compositions of group schemes homomorphisms are still
	group scheme homomorphisms.
\end{defn}


\begin{rem}
	Let $G, G'$ be group schemes, representing the functors $F,F'$.
	Then, by Yoneda's lemma, giving a homomorphism $\alpha\colon G \to G'$
	is equivalent to giving a morphism between the functors they represent.

	Again by Yoneda's lemma, one sees that a morphism $\alpha\colon G \to G'$
	in $\mathsf{Sch}_{ S }$ is a morphism of group schemes iff
	it preserves products, i.e. iff
	\begin{equation}
		\alpha \circ m = m' \circ (\alpha, \alpha)
	,\end{equation} 
	for $m, m'$ the product morphisms of $G$ and $G'$ respectively.
\end{rem}


\begin{defn}[Category of $S$-group schemes]
	Hence, combining all of the definitions so far, 
	one can define $\mathsf{Gp}_S$, the subcategory of $\mathsf{Sch}_{ S }$,
	of {\em $S$-group schemes}, or more simply {\em $S$-groups},
	whose objects are $S$-group schemes
	and morphisms are homomorphisms of $S$-group schemes.
\end{defn}


\begin{rem}[Kernels and cokernels]
	As with any category, one can define kernels and cokernels 
	in $\mathsf{Gp}_S$ via the usual universal properties.
	With reagrds to kernels, one can easily check that, given a morphism
	$\alpha\colon G \to G'$ of $S$-groups, then 
	\begin{equation}
	\begin{tikzcd}
		G \cross_{ G' } S \arrow[r, "i", rightarrow] &
		G,
	\end{tikzcd}
	\end{equation} 
	where $i$ is the projection on the first factor, is a kernel for $\alpha$.
	Hence kernels exist in $\mathsf{Gp}_S$.
	
	When it comes to cokernels, instead, one finds difficulties, much like
	with sheaves of abelian groups.
	In fact, given a morphism $\alpha\colon G \to G'$, one cannot always find an
	element $H \in \mathsf{Gp}_S$ representing the functor
	\begin{equation}
	\begin{tikzcd}
		T \arrow[r, "", mapsto] &
		\coker (\alpha_T) =
		G(T)/G'(T).
	\end{tikzcd}
	\end{equation}
\end{rem}


%tk: decide what to do of this remark
%In the following we'll tend to focus on {\em separated} groups schemes over $S$.
%Notice that in that case, since $\varepsilon$ is a closed immersion, it is also an affine morphism,
%hence as soon as $G$ is affine, also $S$ is.
\begin{rem}[Affine group schemes]
	If we assume that $G = \mathrm{Spec}(A)$ is affine, we can translate the above $S$-scheme
	morphisms, for $S = \mathrm{Spec}(R)$ affine, into $R$-algebra morphisms.
	Then the properties defined by the diagrams in \cref{rem:StructuralMorphisms}
	will translate into properties for these new morphisms.
	Recall that the structural morphism $\pi\colon G \to S$ corresponds to a
	morphism $R \to A$ making $A$ into an $R$-algebra.
	Moreover the diagonal morphism $\Delta\colon G \to G \cross_{ S } G$ corresponds
	to the multiplication morphism of $R$-algebras:
	\begin{equation}
	\begin{tikzcd}[row sep = 0ex
		,/tikz/column 1/.append style={anchor=base east}
		,/tikz/column 2/.append style={anchor=base west}]
		\widetilde{\Delta}\colon A \otimes_R A \arrow[r, "", rightarrow] &
		A \\
		a \otimes_R b \arrow[r, "", mapsto] & a \cdot b
	.\end{tikzcd}
	\end{equation} 
	Then, thanks to the arrow-reversing equivalence of categories between
	affine $R$-schemes and commutative $R$-algebras, one translates the structural morphisms
	of schemes defined in \cref{rem:StructuralMorphisms} into the following $R$-algebras morphisms:
	\begin{equation}
			\begin{tikzcd}[row sep = 0ex
         ,/tikz/column 1/.append style={anchor=base east}
         ,/tikz/column 2/.append style={anchor=base west}
         ,/tikz/column 3/.append style={anchor=base east}]
			\widetilde{m}\colon A \arrow[r, "", rightarrow] &
			A \otimes_R A & \text{(comultiplication)} \\
			\widetilde{\mathrm{inv}}\colon A \arrow[r, "", rightarrow] &
			A & \text{(antipode)} \\
			\widetilde{\varepsilon} \colon A \arrow[r, "", rightarrow] &
			R & \text{(counit/augmentation)} 
		\end{tikzcd}
	\end{equation} 
	Using the contravariant equialence of categories, then,
	one can translate the properties satisfied by $m, \varepsilon$ and $\mathrm{inv}$
	into analogous for $\widetilde{m}, \widetilde{\varepsilon}$ and $\widetilde{\mathrm{inv}}$.
\end{rem}


\begin{defn}[Hopf algebra]\label{defn:HopfAlgebra}
	An {\em Hopf algebra over $R$} is an $R$-algebra $A$,
	endowed with a comultiplication, a couint and an antipode map,
	respectively:
	\begin{equation}
			\begin{tikzcd}[row sep = 0ex
         ,/tikz/column 1/.append style={anchor=base east}
         ,/tikz/column 2/.append style={anchor=base west}
         ,/tikz/column 3/.append style={anchor=base east}]
			\widetilde{m}\colon A \arrow[r, "", rightarrow] &
			A \otimes_R A \\
			\widetilde{\mathrm{inv}}\colon A \arrow[r, "", rightarrow] &
			A \\
			\widetilde{\varepsilon} \colon A \arrow[r, "", rightarrow] &
			R,
		\end{tikzcd}
	\end{equation} 
	satisfying the conditions obtained by dualizing those
	of \cref{rem:StructuralMorphisms}, more explicitly:
	\begin{align}
		( \widetilde{m} \otimes_R id_A ) \circ \widetilde{m} &=
		( id_A \otimes_R \widetilde{m} ) \circ \widetilde{m},\\
		( id_A \otimes_R \widetilde{\varepsilon} ) \circ \widetilde{m} &=
		( \widetilde{\varepsilon} \otimes_R id_A ) \circ \widetilde{m} =
		id_A,\\
		\widetilde{\Delta} \circ ( id_A \otimes_R \widetilde{\mathrm{inv}} ) 
		\circ \widetilde{m} &=
		\widetilde{\Delta} \circ ( \widetilde{\mathrm{inv}} \otimes_R id_A ) 
		\circ \widetilde{m} =
		(R \to A) \circ \widetilde{\varepsilon}
	.\end{align} 
	Moreover one defines a morphism of Hopf algebras to be an $R$-algebra
	morphism preserving the just defined morphisms.
	Actually, as is the case for groups, it is enough to check that an $R$ algebra
	morphism commutes with $\widetilde{m}$, in order for it to be a Hopf algebra morphism.

	Finally we call $I \coloneqq \ker \widetilde{\varepsilon}$ the 
	{\em augmentation ideal} of $A$.
\end{defn}


\begin{rem}[Equivalence of categories]
	Clearly, then, any Hopf algebra over $R$ gives rise
	to an affine $R$-group via the aforementioned equivalence of categories.
	This actually is an equivalence of categories between affine
	$R$-group schemes and Hopf algebras over $R$, since 
	product in a group scheme corresponds to comultiplication in its 
	associated Hopf algebra, and morphism in the two categories are defined
	to preserve such operation.
\end{rem}


\begin{defn}[Augmentation ideal]
	Since the structure morphism $R \to A$, of the Hopf algebra $A$ over $R$,
	splits the following short exact sequence
	\begin{equation}
	\begin{tikzcd}
		0 \arrow[r, "", rightarrow] &
		I \arrow[r, "", rightarrow] &
		A \arrow[r, "\widetilde{\varepsilon}", rightarrow] &
		R \arrow[r, "", rightarrow] &
		0
	\end{tikzcd}
	\end{equation}
	we have $A = R \cdot 1 \oplus I$.
	Then one obtain $A \otimes A = R \oplus \left( I \otimes 1 \right) \oplus
	\left( 1 \otimes I \right) \oplus \left( I \otimes I \right)$,
	and the following fact about comultiplication:
	for all $f \in I$,
	\begin{equation}
		\widetilde{m}(f) - f \otimes 1 - 1 \otimes f \in I \otimes I
	.\end{equation} 
\end{defn}


In order to compute a few useful examples, let's make explicit the relation between
multiplication in an $S$-group and comultiplication in its associated Hopf algebra over
$R$, for $S = \mathrm{Spec}(R)$.
\begin{rem}\label{rem:ExplicitComult}
	Yoneda tells us that the multiplication map 
	$m\colon G \cross G \to G$ can be expressed, using the group law
	on $G(G \cross G)$, as the product $\mathrm{pr}_1 \mathrm{pr}_2$
	of the two projection morphisms.
	Then, in the case of affine schemes $S = \mathrm{Spec}(R)$
	and $G = \mathrm{Spec}(A)$, one can translate the above to the corresponding
	Hopf algebra morphism, using the equivalence of categories.
	More explicitly one can describe the comultiplication map
	$\widetilde{m}$ as the product in 
	$\mathrm{Hom}_{R\text{-}\mathsf{Alg}} \left( A, A \otimes_R A \right)$ 
	(which has the same group structure as $G(G \cross G)$)
	of the embedding morphisms
	\begin{equation}
	\begin{tikzcd}
		\widetilde{\mathrm{pr}}_1: a \arrow[r, "", mapsto] &
		a \otimes_R 1 &
		\text{and} &
		\widetilde{\mathrm{pr}}_2: a \arrow[r, "", mapsto] &
		1 \otimes_R a
	.\end{tikzcd}
	\end{equation}
\end{rem}


\begin{ex}
	In all of the following examples we will denote $S \coloneqq \mathrm{Spec}(R)$
	and $G \coloneqq \mathrm{Spec}(A)$.\nopagebreak[4]
	\begin{enumerate}
		\item The {\em additive group scheme}, given by 
			$\mathbb{G}_a \coloneqq \mathrm{Spec}(R[x])$.
			It acts on $R$-schemes by
			\begin{equation}
			\begin{tikzcd}[row sep = 0ex
				,/tikz/column 1/.append style={anchor=base east}
				,/tikz/column 2/.append style={anchor=base west}]
%				\mathbb{G}_a\colon \mathsf{Sch}_{ S } \arrow[r, "", rightarrow] &
%				\mathsf{Gp} \\
				X \arrow[r, "", mapsto] & 
				\Gamma \left( X , \mathcal{O}_{ X } \right)
			,\end{tikzcd}
			\end{equation} 
			in which $\Gamma \left( X , \mathcal{O}_{ X } \right)$ is viewed
			as an additive group.
		%	Then $\mathbb{G}_a$ is represented by 
		%	\begin{equation}
		%		G = \mathrm{Spec}(R[x])
		%	.\end{equation} 
			In fact	we know that
			\begin{equation}
			\mathrm{Hom}_{\mathsf{Sch}_S} \left( X, \mathbb{G}_a \right) \simeq
			\mathrm{Hom}_{R \text{-}\mathsf{Alg}} 
			\left( R[x], \Gamma \left( X , \mathcal{O}_{ X } \right) \right) \simeq
			\Gamma \left( X , \mathcal{O}_{ X } \right)
			,\end{equation} 
			functorially in $X$.
			The last isomorphism is determined by 
			$(x \mapsto a) \mapsto a$.
			The hom set 
			$\mathrm{Hom}_{R \text{-}\mathsf{Alg}} \left( R[x], A \right)$
			inherits the additive group structure from $A$, and the embeddings
			of $R[x]$ in $R[x] \otimes_R R[x]$ are given by
			\begin{equation}
				\widetilde{\mathrm{pr}}_1(x) = x \otimes_R 1
				\qquad \text{ and } \qquad
				\widetilde{\mathrm{pr}}_2(x) = 1 \otimes_R x
			.\end{equation} 
			Then, thanks to \cref{rem:ExplicitComult},
			we desume that
			\begin{equation}
				\widetilde{m}(x) =
				\left( \widetilde{\mathrm{pr}}_1(x) \right) +
				\left( \widetilde{\mathrm{pr}}_2(x) \right) =
				x \otimes_R 1 + 1 \otimes_R x
			.\end{equation} 
			Then, from the properties (see \cref{defn:HopfAlgebra})
			of counit and antipode, one easily checks that 
			\begin{equation}
				\widetilde{\varepsilon}(x) = 0
				\qquad \text{ and } \qquad
				\widetilde{\mathrm{inv}}(x) = -x
			.\end{equation} 


		\item The {\em multiplicative group scheme} 
			$\mathbb{G}_m \coloneqq \mathrm{Spec}(R[x,x^{-1}])$.
			It acts on $R$-schemes by
			\begin{equation}
			\begin{tikzcd}[row sep = 0ex
				,/tikz/column 1/.append style={anchor=base east}
				,/tikz/column 2/.append style={anchor=base west}]
				X \arrow[r, "", mapsto] & 
				\Gamma \left( X , \mathcal{O}_{ X } \right)^*
			,\end{tikzcd}
			\end{equation} 
			in which $\Gamma \left( X , \mathcal{O}_{ X } \right)^*$ is viewed
			as a multiplicative group.
			In fact one checks that
			\begin{equation}
			\mathrm{Hom}_{\mathsf{Sch}_S} \left( X, G \right) \simeq
			\mathrm{Hom}_{R \text{-}\mathsf{Alg}} 
			\left( R[x, x^{-1}], \Gamma \left( X , \mathcal{O}_{ X } \right) \right) \simeq
			\Gamma \left( X , \mathcal{O}_{ X } \right)^*
			,\end{equation} 
			functorially in $X$.
			Then, reasoning as before, one obtains
			\begin{equation}
				\widetilde{m}(x) =
				\left( \widetilde{\mathrm{pr}}_1(x) \right) \cdot
				\left( \widetilde{\mathrm{pr}}_2(x) \right) =
				(x \otimes_R 1) \cdot (1 \otimes_R x) = 
				x \otimes_R x
			.\end{equation} 
			Finally, from the properties  of counit and antipode map
			(see \cref{defn:HopfAlgebra}) one desumes
			\begin{equation}
				\widetilde{\varepsilon}(x) = 1
				\qquad \text{ and } \qquad
				\widetilde{\mathrm{inv}}(x) = x^{-1}
			.\end{equation} 


		\item The {\em general linear group scheme} $\mathrm{GL}_n \coloneqq 
			\mathrm{Spec}(R[\mathrm{x},\mathrm{y}]/J)$,
			where
			\begin{equation}
				R[\mathrm{x},\mathrm{y}] \coloneqq
				R[x_{11}, x_{12}, \ldots, x_{nn},
				y_{11}, \ldots, y_{nn}]
			\end{equation} 
			and $J$ is the ideal generated by the $n^2$ entries of the matrix
			$\left( x_{ij} \right)_{i,j=1}^n \cdot \left( y_{ij} \right)_{i,j=1}^n - I$,
			for $I$ the identity matrix.
			It acts on $R$-schemes by
			\begin{equation}
			\begin{tikzcd}[row sep = 0ex
				,/tikz/column 1/.append style={anchor=base east}
				,/tikz/column 2/.append style={anchor=base west}]
				X \arrow[r, "", mapsto] & \mathrm{GL}_n(X)
			,\end{tikzcd}
			\end{equation} 
			where $\mathrm{GL}(n)(X)$ is the set of invertible $n \cross n$
			matrices with coefficients in $\Gamma \left( X , \mathcal{O}_{ X } \right)$,
			viewed as a multiplicative group.
			Let's recall that, in $\mathrm{GL}_n(X)$, the product
			$\left( x_{i,j} \right)_{i,j = 1}^n \cdot 
			\left( y_{i,j} \right)_{i,j = 1}^n$
			is given by $\left( c_{i,j} \right)_{i,j = 1}^n$, where
			\begin{equation}
			c_{i,j} = \sum_{l=1}^{n} x_{i,l} \cdot y_{l,j}
			.\end{equation} 
			Then, reasoning like before, we can explicitly write the Hopf algebra maps.
			In fact we see they are
			\begin{equation*}
				\widetilde{m}(x_{i,j})_{i,j=1}^n = \sum_{l=1}^{n} x_{i,l} \otimes_R x_{l,j},
				\quad
				\widetilde{\varepsilon}(x_{i,j})_{i,j=1}^n = 1,
				\quad
				\widetilde{\mathrm{inv}}(x_{i,j})_{i,j=1}^n = (y_{i,j})_{i,j=1}^n
			,\end{equation*} 
			where $\left( y_{i,j} \right)_{i,j}$ satisfies 
			$\left( x_{ij} \right)_{i,j=1}^n \cdot \left( y_{ij} \right)_{i,j=1}^n = I$.


		\item The {\em group scheme of $n$-th roots of unity}, denoted by $\mu_n$.
			Is defined to be the kernel of the $n$-th power morphism
			$\mathbb{G}_m \to \mathbb{G}_m$,
			corresponding to the $R$-algebra morphism
			$\mu\colon x \mapsto x^n$.
			Then $\mu_n$ is represented by $\mathrm{Spec}(\coker \mu)$,
			and the morphism $\mu_n \hookrightarrow \mathbb{G}_m$ is given by the projection
			\begin{equation}
			\begin{tikzcd}
				R[x,x^{-1}] \arrow[r, "", twoheadrightarrow] &
				R[x,x^{-1}] / (x^n - 1)
			,\end{tikzcd}
			\end{equation}
			which is surjective, finite and flat, making $\mu_n$
			a closed finite flat subgroup scheme of $\mathbb{G}_m$.


		\item The {\em diagonalizable group schemes}. Let $X$ be an ordinary
			commutative group, and denote by $R[X] \coloneqq \bigoplus_{x \in X} Rx$
			its associated group $R$-algebra.
			This is a Hopf algebra, whose structural morphism
			are given, for every $x \in X$, by
			\begin{equation}
				\widetilde{m}(x) = x \otimes_R x,
				\quad
				\widetilde{\varepsilon}(x) = 1,
				\quad
				\widetilde{\mathrm{inv}}(x) = x^{-1}
			.\end{equation} 
			The above can be checked directly, since we have
			the identifications, for $G = \mathrm{Spec}(A)$:
			\begin{equation}
				\left( D(X) \right)(G) \coloneqq
				\mathrm{Hom}_{R \text{-Alg}} \left( R[X], A \right) \simeq
				\mathrm{Hom}_{\mathsf{Ab}} \left( X, A^* \right)
			,\end{equation} 
			where the last hom set has a natural structure of abelian
			group, since $\mathsf{Ab}$ is an abelian category.
			Then we define the {\em diagonalizable group scheme} $D(X)$
			as the commutative $R$-group $\mathrm{Spec}(R[X])$.

			Two important cases are given by $\mathbb{G}_m \simeq D(\mathbb{Z})$
			and $\mu_n \simeq D(\mathbb{Z}/n\mathbb{Z})$.
			Moreover, if $X$ is finite, $R[X]$ is a free $R$-module of rank $n$,
			making $D(X)$ finite and flat over $R$.
			More generally, for $X$ finitely generated, 
			from the structure theorem for finitely generated abelian groups, 
			$X$ is isomorphic to a finite product of cyclic groups.
			Hence $D(X)$ is a finite product of copies of $\mathbb{G}_m$
			and $\mu_n$, for various $n$.
			It is then a closed subgroup scheme of $\mathbb{G}_m^r$, for some $r$,
			which again can be seen as the closed subgroup scheme of diagonal
			matrices of $\mathrm{GL}_r$, explaining the name 
			{\em diagonalizable}.


		\item The {\em group scheme of $p^r$-th roots of zero},
			if $\mathrm{char}\, R = p$, denoted by $\alpha_{p^r}$. 
			It is defined to be the kernel of the $p^r$-th power
			morphism $\mathbb{G}_a \to \mathbb{G}_a$,
			corresponding to the $R$-algebra morphism
			$\alpha\colon x \mapsto x^{p^r}$.
			Then $\alpha_{p^r}$ is represented by $\mathrm{Spec}(\coker \alpha)$.
			Moreover this is an additive subgroup scheme, since $\mathrm{char}\, R = p$.
			As for $\mu_n$, it is a closed finite flat subgroup scheme of 
			$\mathbb{G}_a$.
	\end{enumerate}
\end{ex}

tk: you have to add the part on duality, on exact sequence, on etale groups and separated algebras,
on the canonical short exact sequence with the connected component of the identity.

tk: If you need to type group scheme actions on functors see Vistoli, page 22-23

\subsection{Duality}
Let's now approach the topic of duality.
We first need a remark about base change:


\begin{rem}[Base change]
	Let $U, T \in \mathsf{Sch}_{ S }$ be two $S$-schemes.
	We use the notation $U_T$ for the base change $U \cross_{ S } T$.
	It is important to notice that, for $V \in \mathsf{Sch}_{ T }$, we 
	have $U_T(V) = U(V)$, where in the last expression
	we considered $V$ as an $S$ scheme, by $V \to T \to S$.

	In particular the examples we have developed so far (tk: check when you add $\alpha_p$)
	are all $\mathbb{Z}$-group schemes.
	Then we will use the above notation to mean the group scheme over $\mathbb{Z}$
	and take their base change when working in $\mathsf{Sch}_{ S }$.
\end{rem}


\begin{defn}[Characters of $\mathrm{S}$-groups]
	Let $G$ be an $S$-group scheme.
	A {\em character} of $G$ is a homomorphism of $S$-groups
	\begin{equation}
	\begin{tikzcd}[row sep = 0ex
		,/tikz/column 1/.append style={anchor=base east}
		,/tikz/column 2/.append style={anchor=base west}]
		\chi\colon G \arrow[r, "", rightarrow] &
		(\mathbb{G}_m)_S
	.\end{tikzcd}
	\end{equation} 
\end{defn}


\begin{rem}[]
	Characters form a subgroup of the set of morphism of $S$-schemes
	between $G$ and $(\mathbb{G}_m)_S$, which we will denote by
	\begin{equation}
		\mathrm{Hom}_{\mathsf{Gr}_S} \left( G, (\mathbb{G}_m)_S \right)
		\subset
		\mathrm{Hom}_{\mathsf{Sch}_{ S }} \left( G, (\mathbb{G}_m)_S \right)
	.\end{equation} 
	Then one can introduce the contravariant sheaf hom functor,
	from $\mathsf{Sch}_{ S }$ to $\mathsf{Ab}$
	\begin{equation}
	\begin{tikzcd}[row sep = 0ex
		,/tikz/column 1/.append style={anchor=base east}
		,/tikz/column 2/.append style={anchor=base west}]
		\mathcal{H}\mathrm{om}_{\mathsf{Gr}_S} \left( G, (\mathbb{G}_m)_S \right)\colon
%		\mathsf{Sch}_{ S } \arrow[r, "", rightarrow] &
%		\mathsf{Ab} \\
		T \arrow[r, "", mapsto] & 
		\mathrm{Hom}_{\mathsf{Gr}_T} \left( G_T, (\mathbb{G}_m)_T \right)
	.\end{tikzcd}
	\end{equation} 
\end{rem}

\begin{defn}[Cartier dual]
	Given an $S$-group scheme $G$, we define its {\em Cartier dual}
	as the group scheme
	\begin{equation}
		G^D \coloneqq \mathcal{H}\mathrm{om}_{\mathsf{Gr}_S} \left( G, (\mathbb{G}_m)_S \right)
	.\end{equation} 
\end{defn}


\begin{rem}[Affine case]
	In the affine case one can check that, for $S = \mathrm{Spec}(R)$
	and $G = \mathrm{Spec}(A)$, the Cartier dual $G^D$ is given by
	the $R$-algebra 
	\begin{equation}
	A^D \coloneqq \mathrm{Hom}_{R\text{-}\mathsf{Mod}} \left( A, R \right)
	.\end{equation} 
	Its Hopf algebra structure is obtained dualizing the Hopf algebra
	structure of $A$.
	In particular product and coproduct of $A$ become, respectively,
	coproduct and product of $A'$, as
	\begin{equation*}
	\begin{tikzcd}
		(\widetilde{\Delta})^*\colon
		A^D \arrow[r, "", rightarrow] &
		A^D \otimes_R A^D &
		\text{\text{and}} &
		(\widetilde{m})^*\colon
		A^D \otimes_R A^D \arrow[r, "", rightarrow] &
		A^D 
	.\end{tikzcd}
	\end{equation*}
	
\end{rem}


In the following we'll assume that $S$ is a locally noehterian base scheme.
Let's now start from a particularly relevant definition:
\begin{rem}[Finite $S$-group]
	An $S$-scheme $G$ is finite and flat over $S$ iff its sheaf of regular functions
	$\mathcal{O}_G$ is locally free of finite rank as an $\mathcal{O}_S$-module.
	More explicitly this means that there exists a cover of $S$ by affine open subschemes
	$V_i$ s.t. for all $i$ the restriction of the structure morphism is of the form
	$\mathrm{Spec}(A) \to \mathrm{Spec}(R)$, for $A$ an $R$-module of finite rank over $R$. 
\end{rem}

\begin{defn}[Order of a finite flat $S$-scheme]
	Given a finite flat $S$-group scheme $G$, the rank of $\mathcal{O}_X$ as
	and $\mathcal{O}_S$-module is a locally constant function, with integer values.
	We call such a function the order of $G$ over $S$ and denote it by $[G:S]$.
	Moreover we'll use the notation $[G:S] = n$ to state that $G$ is finite flat of
	constant rank $n$ over $S$.
\end{defn}

\begin{prop}[]\leavevmode\vspace{-.2\baselineskip}
\begin{enumerate}
	\item Consider the morphism of schemes $X \to Y \to S$, with $[X:Y] = m$.
		Then $X$ is finite and flat over $S$ iff $Y$ is, in which case
		$[X:S] = [X:Y] [Y:S]$ as functions on $Y$.
		
	\item If $[X_i:S] = n_i$ for $i=1,2$, then
		$[X_1 \cross_{ S } X_2 : S] = n_1n_2$.

	\item If $[X:S] = n$, then $[X \cross_{ S } T : T] = n$
		for all $T \in \mathsf{Sch}_{ T }$.
\end{enumerate}
\end{prop}



tk: might be useful later
\begin{prop}[\cite{Shatz}, \textsection $4$]
	Let $R$ be a complete local ring with separably closed residue field
	(or $R$ a strict Hensel local ring), such that the characteristic of the
	residue field is $p > 0$.
	Then a connected finite group scheme over $R$ has order $p^t$ for some $t$.
\end{prop}


\subsection{Separable algebras}
The study of {\'e}tale group schemes is stricly related to that of
separable algebras, so here a few interesting results for the latter:

\begin{thm}[\cite{Waterhouse}, \textsection $6.2$]
	`\label{thm:SeparableAlgebrasCharacterization}
	Let $k$ be a field, and denote by $\overline{k}$ and $k^s$ respectively
	an algebraic and separable closure of $k$.
	Let $A$ be a finite dimensional $k$-lagebra.
	The following are equivalent:
\begin{enumerate}
	\item $A \otimes_k \overline{k}$ is reduced.
	\item $A \otimes_k \overline{k} \simeq \overline{k} \cross \cdots \cross \overline{k}$.
	\item The number of $k$-algebra homomorphisms $A \to  \overline{k}$
		equals the dimension of $A$ over $k$.
	\item $A$ is a product of separable field extensions of $k$.
	\item $A \otimes_k k^s \simeq k^s \cross \cdots \cross k^s$.
\end{enumerate}
If, moreover, $k$ is a prefect field, all of the above are equivalent to
\begin{enumerate}[resume]
	\item $A$ is reduced.
\end{enumerate}
\end{thm}


\begin{defn}[Separable algebra]
	A $k$-algebra $A$ satisfying the equivalent conditions of
	\cref{thm:SeparableAlgebrasCharacterization}
	is called {\em separable}.
\end{defn}


\begin{cor}[\cite{Waterhouse}, \textsection $6.2$]
	Subalgebras, quotients, products and tensor products of separable algebras
	are separable.
\end{cor} 


\end{document}
